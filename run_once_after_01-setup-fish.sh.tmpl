#!/bin/bash

# Exit on error, undefined variable, or pipeline failure
set -euo pipefail

# Function to run Fisher update
run_fisher_update() {
    if command -v fish &>/dev/null; then
        echo "Updating Fisher and its plugins..."
        fish -c 'fisher update'
        echo "Fisher update completed successfully."
    else
        echo "Error: Fish shell is not installed or not in PATH." >&2
        exit 1
    fi
}

# Function to setup fzf
run_fzf_setup() {
    if command -v fish &>/dev/null; then
        echo "Setting up fzf..."
        fish -c 'fzf_configure_bindings --directory=\co'
        echo "Fzf setup completed successfully."
    else
        echo "Error: Fish shell is not installed or not in PATH." >&2
        exit 1
    fi
}

# Main function
main() {
    run_fisher_update
    run_fzf_setup
}

# Run the main function
main
